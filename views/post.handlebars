{{!-- display posts --}}
<article>
    <h2>{{post.post_title}}</h2>
    <p>{{post.post_text}}</p>
    <p>Written by: {{post.user.username}} on {{format_date post.createdAt}}</p>
</article>

{{!-- comments --}}

<section>
    <h3>Comments</h3>
    {{#each post.comments}}
        <div class="comment">
            <p>{{this.comment_text}}</p>
            <p>Written by: {{this.user.username}} on {{format_date this.created_At}}</p>
        </div>
    {{/each}}
</section>
    
    {{!-- add comment --}}
    {{!-- only logged in users can comment --}}
    {{#if logged_in}}
        <section>
            <h3>Add a comment</h3>
            <form class="comment-form" action="/api/comments" method="post">
                <textarea name="comment_text" placeholder="Comment text"></textarea>
                <input type="hidden" name="post_id" value="{{post.id}}">
                <button type="submit">Add comment</button>
            </form>
        </section>
    {{else}}
        <p>You need to log in to comment.</p>
    {{/if}}
<script src="/js/post.js"></script>